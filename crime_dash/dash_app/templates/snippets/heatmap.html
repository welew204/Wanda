<div id='map'></div>
<script>
    mapboxgl.accessToken = "{{ mapbox_access_token }}";
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        style: 'mapbox://styles/welew204/clmpk6ttn04qe01qig97x1hum', // style URL
        center: [-122.255, 37.804363], // OAKLAND starting position [lng, lat]
        zoom: 11, // starting zoom
        maxzoom: 20
    });
    map.on('load', () => {
        map.addSource('crimes', {
            type: 'geojson',
            data: './crimes.geojson'
        });
        console.log("loaded the crimes geojson...")
        console.log()
        map.addLayer({
            id: 'crimes-heat',
            type: 'heatmap',
            source: 'crimes',
            maxzoom: 20,
            paint: {
                'heatmap-weight': 1,
                // assign color values be applied to points depending on their density
                'heatmap-color': [
                    'interpolate',
                    ['linear'],
                    ['heatmap-density'],
                    0,
                    'rgba(236,222,239,0)',
                    0.2,
                    'rgb(208,209,230)',
                    0.4,
                    'rgb(166,189,219)',
                    0.6,
                    'rgb(103,169,207)',
                    0.8,
                    'rgb(28,144,153)'
                ],
                // increase radius as zoom increases
                'heatmap-radius': {
                    stops: [
                        [11, 5],
                        [20, 20],
                    ]
                },
                // decrease opacity to transition into the circle layer
                'heatmap-opacity': 1
            }
        }, 'waterway-label'
        );
    });

</script>